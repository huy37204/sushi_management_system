<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gi·ªè h√†ng</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-[#143B36]">
    <%- include('partials/customer/header.ejs') %> <%-
    include('partials/customer/page_flow.ejs') %>
    <div class="grid lg:grid-cols-3 gap-8 text-[#ffffff] py-5">
      <!-- B·∫£ng gi·ªè h√†ng -->
      <div
        class="col-span-2 bg-[#244a41] rounded-lg p-6 border-4 border-yellow-600 shadow-md"
      >
        <table class="w-full text-left">
          <thead>
            <tr class="border-b border-gray-600">
              <th class="pb-3">Th√¥ng tin s·∫£n ph·∫©m</th>
              <th class="pb-3">ƒê∆°n gi√°</th>
              <th class="pb-3">S·ªë l∆∞·ª£ng</th>
              <th class="pb-3">Th√†nh ti·ªÅn</th>
            </tr>
          </thead>
          <tbody>
            <!-- S·∫£n ph·∫©m 1 -->
            <tr class="border-b border-gray-600">
              <td class="py-4 flex items-center">
                <img
                  src="https://oldsailor.com.vn/vnt_upload/product/08_2022/172cd53c1e23db7d823243.jpg"
                  alt="Salad rau"
                  class="w-16 h-16 rounded-md mr-4"
                />
                <div>
                  <p class="font-medium">Salad rau m√πa s·ªët cam</p>
                  <a href="#" class="text-orange-400 text-sm hover:underline"
                    >X√≥a</a
                  >
                </div>
              </td>
              <td class="py-4">68.000ƒë</td>
              <td class="py-4 flex items-center">
                <button
                  class="w-8 h-8 bg-orange-500 text-white rounded-md hover:bg-orange-600"
                >
                  -
                </button>
                <input
                  type="text"
                  value="1"
                  class="w-12 mx-2 text-center bg-transparent border border-gray-600 rounded-md"
                />
                <button
                  class="w-8 h-8 bg-orange-500 text-white rounded-md hover:bg-orange-600"
                >
                  +
                </button>
              </td>
              <td class="py-4">68.000ƒë</td>
            </tr>
            <!-- S·∫£n ph·∫©m 2 -->
            <tr>
              <td class="py-4 flex items-center">
                <img
                  src="https://product.hstatic.net/1000369857/product/ao_ab19_xanh_den_1_c691c6dc769d483e860b6a1805be1b6f.jpg"
                  alt="Ph·ªü cu·ªën"
                  class="w-16 h-16 rounded-md mr-4"
                />
                <div>
                  <p class="font-medium">Ph·ªü cu·ªën</p>
                  <a href="#" class="text-orange-400 text-sm hover:underline"
                    >X√≥a</a
                  >
                </div>
              </td>
              <td class="py-4">82.000ƒë</td>
              <td class="py-4 flex items-center">
                <button
                  class="w-8 h-8 bg-orange-500 text-white rounded-md hover:bg-orange-600"
                >
                  -
                </button>
                <input
                  type="text"
                  value="1"
                  class="w-12 mx-2 text-center bg-transparent border border-gray-600 rounded-md"
                />
                <button
                  class="w-8 h-8 bg-orange-500 text-white rounded-md hover:bg-orange-600"
                >
                  +
                </button>
              </td>
              <td class="py-4">82.000ƒë</td>
            </tr>
          </tbody>
        </table>

        <!-- T·ªïng ti·ªÅn -->
        <div class="text-right mt-6">
          <h5 class="text-xl font-semibold">
            T·ªïng ti·ªÅn: <span class="text-orange-500">150.000ƒë</span>
          </h5>
          <button
            class="mt-4 px-8 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600"
          >
            Thanh to√°n
          </button>
        </div>
      </div>

      <!-- Ph·∫ßn voucher -->
      <div
        class="bg-[#244a41] rounded-lg p-6 border-4 border-yellow-600 shadow-md"
      >
        <h5 class="text-lg font-semibold text-orange-400 mb-4">
          üéÅ Nh·∫≠p voucher ngay !!!
        </h5>
        <ul class="space-y-4">
          <li class="flex justify-between items-center">
            <span>C√≤n <strong>150.000ƒë</strong> ƒë·ªÉ nh·∫≠n m√£ freeship</span>
            <button
              class="px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600"
            >
              Th√™m
            </button>
          </li>
          <li class="flex justify-between items-center">
            <span
              >C√≤n <strong>550.000ƒë</strong> ƒë·ªÉ nh·∫≠n m√£ gi·∫£m
              <strong>20.000ƒë</strong></span
            >
            <button
              class="px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600"
            >
              Th√™m
            </button>
          </li>
          <li class="flex justify-between items-center">
            <span
              >C√≤n <strong>850.000ƒë</strong> ƒë·ªÉ nh·∫≠n m√£ gi·∫£m
              <strong>50.000ƒë</strong></span
            >
            <button
              class="px-4 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600"
            >
              Th√™m
            </button>
          </li>
        </ul>
      </div>
    </div>
    <%- include('partials/customer/footer.ejs') %>
    <%-
    include('partials/customer/float_button.ejs') %>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // L·∫•y t·∫•t c·∫£ c√°c h√†ng trong b·∫£ng gi·ªè h√†ng
        const rows = document.querySelectorAll("tbody tr");

        rows.forEach((row) => {
          // L·∫•y c√°c th√†nh ph·∫ßn c·∫ßn s·ª≠ d·ª•ng
          const minusBtn = row.querySelector("button:first-child"); // N√∫t gi·∫£m
          const plusBtn = row.querySelector("button:last-child"); // N√∫t tƒÉng
          const quantityInput = row.querySelector("input"); // √î nh·∫≠p s·ªë l∆∞·ª£ng
          const unitPriceElement = row.querySelector("td:nth-child(2)"); // ƒê∆°n gi√°
          const totalPriceElement = row.querySelector("td:nth-child(4)"); // Th√†nh ti·ªÅn

          // L·∫•y gi√° tr·ªã ƒë∆°n gi√° (chuy·ªÉn ƒë·ªïi t·ª´ text sang s·ªë)
          const unitPrice = parseInt(
            unitPriceElement.textContent.replace(/\D/g, ""),
          );

          // H√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng v√† t√≠nh th√†nh ti·ªÅn
          const updateTotal = () => {
            let quantity = parseInt(quantityInput.value) || 1; // S·ªë l∆∞·ª£ng, m·∫∑c ƒë·ªãnh l√† 1 n·∫øu kh√¥ng h·ª£p l·ªá
            if (quantity < 1) quantity = 1; // Kh√¥ng cho s·ªë l∆∞·ª£ng nh·ªè h∆°n 1
            quantityInput.value = quantity; // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng v√†o √¥ input
            const total = quantity * unitPrice; // T√≠nh th√†nh ti·ªÅn
            totalPriceElement.textContent = `${total.toLocaleString()}ƒë`; // Hi·ªÉn th·ªã th√†nh ti·ªÅn
            updateGrandTotal(); // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn to√†n gi·ªè h√†ng
          };

          // Th√™m s·ª± ki·ªán cho n√∫t gi·∫£m
          minusBtn.addEventListener("click", () => {
            quantityInput.value = Math.max(
              1,
              parseInt(quantityInput.value) - 1,
            ); // Gi·∫£m s·ªë l∆∞·ª£ng, t·ªëi thi·ªÉu l√† 1
            updateTotal();
          });

          // Th√™m s·ª± ki·ªán cho n√∫t tƒÉng
          plusBtn.addEventListener("click", () => {
            quantityInput.value = parseInt(quantityInput.value) + 1; // TƒÉng s·ªë l∆∞·ª£ng
            updateTotal();
          });

          // S·ª± ki·ªán khi ng∆∞·ªùi d√πng nh·∫≠p tr·ª±c ti·∫øp v√†o √¥ s·ªë l∆∞·ª£ng
          quantityInput.addEventListener("input", updateTotal);
        });

        // H√†m c·∫≠p nh·∫≠t t·ªïng ti·ªÅn to√†n gi·ªè h√†ng
        const updateGrandTotal = () => {
          let grandTotal = 0;
          const totalElements = document.querySelectorAll(
            "tbody tr td:nth-child(4)",
          );
          totalElements.forEach((totalElement) => {
            grandTotal +=
              parseInt(totalElement.textContent.replace(/\D/g, "")) || 0;
          });
          const grandTotalElement = document.querySelector(".text-orange-500");
          grandTotalElement.textContent = `${grandTotal.toLocaleString()}ƒë`; // C·∫≠p nh·∫≠t t·ªïng ti·ªÅn
        };
      });
    </script>
  </body>
</html>
